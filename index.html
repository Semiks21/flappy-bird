<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Phaser Flappy Bird Klonu</title>
    <script src="https://cdn.jsdelivr.net/npm/phaser@3.55.2/dist/phaser.min.js"></script>
    <style>
        body {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            background-color: #240870;
        }
    </style>
</head>
<body>

<script>
var config = {
    type: Phaser.AUTO,
    width: 800,
    height: 600,
    parent: 'game-container',
    physics: {
        default: 'arcade',
        arcade: {
            gravity: { y: 1000 },
            debug: false
        }
    },
    scene: {
        preload: preload,
        create: create,
        update: update
    }
};

var game = new Phaser.Game(config);

var bird;
var pipes;
var score = 0;
var scoreText;
var isGameOver = false;

function preload ()
{
    this.load.image('bird', 'https://i.imgur.com/8x83v7e.png');
    this.load.image('pipe', 'https://i.imgur.com/k2oT34F.png');
    this.load.image('sky', 'https://i.imgur.com/39QdD0o.png');
}

function create ()
{
    this.add.image(400, 300, 'sky');
    bird = this.physics.add.sprite(100, 300, 'bird');
    bird.setCollideWorldBounds(true);

    pipes = this.physics.add.group();

    scoreText = this.add.text(16, 16, 'Skor: 0', { fontSize: '32px', fill: '#000' });

    this.time.addEvent({ delay: 1500, callback: addPipes, callbackScope: this, loop: true });

    this.input.on('pointerdown', jump, this);

    this.physics.add.collider(bird, pipes, hitPipe, null, this);
}

function update ()
{
    if (isGameOver) {
        return;
    }

    if (bird.y > 590 || bird.y < 10) {
        gameOver.call(this);
    }
}

function jump()
{
    if (!isGameOver) {
        bird.setVelocityY(-400);
    }
}

function addPipe(x, y) {
    var pipe = this.physics.add.sprite(x, y, 'pipe');
    pipes.add(pipe);
    pipe.body.allowGravity = false;
    pipe.setVelocityX(-200);

    pipe.checkWorldBounds = true;
    pipe.outOfBoundsKill = true;
}

function addPipes() {
    if (isGameOver) {
        return;
    }

    var hole = Math.floor(Math.random() * 5) + 1;

    for (var i = 0; i < 8; i++) {
        if (i !== hole && i !== hole + 1) {
            addPipe.call(this, 800, i * 75 + 25);
        }
    }

    score++;
    scoreText.setText('Skor: ' + score);
}

function hitPipe() {
    if (isGameOver) {
        return;
    }

    gameOver.call(this);
}

function gameOver() {
    isGameOver = true;
    this.physics.pause();
    bird.setTint(0xff0000);

    this.add.text(400, 300, 'Oyun Bitti', { fontSize: '64px', fill: '#000' }).setOrigin(0.5);
    this.add.text(400, 380, 'Yeniden Oynamak İçin Sayfayı Yenile', { fontSize: '24px', fill: '#000' }).setOrigin(0.5);
}

</script>

</body>
</html>